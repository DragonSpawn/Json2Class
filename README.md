Json2Class
=============
This is a little tool written in Python 2.7 which generates class definitions from json files that are supplied to it.
It also generates functions which can load and save these objects from json strings.

I like to have static typing since it makes it a lot easier to keep track of what is going on and having classes
generated from the same source makes it easier to sync changes between frontend/backend if they use different languages.

## Requirements
You need to have Python 2.7.x and install [enum34](https://pypi.python.org/pypi/enum34) so it can use some proper enums. 

## Example
### Commandline
    Json2Class.py Person.json --cs-out CsGenerated --py-out PyGenerated
### Person.json
    {
      "name": "Incognito",
      "age": 32,
      "country": "Sweden",
      "family": [{
                    "@name": "Person",
                    "@skip_generate": "",
                    "name": "Mom",
                    "age": 57,
                    "country": "Sweden",
                    "family": []
                },
                {
                    "@name": "Person",
                    "@skip_generate": "",
                    "name": "Dad",
                    "age": 65,
                    "country": "Sweden",
                    "family": []
                }]
    }

### CsGenerated/Person.cs
    using System.Collections.Generic;
    using SimpleJSON;
    
    /////////////////////////////////////////////////////////////////////////////////////
    /* This file is generated by Json2Class (https://github.com/DragonSpawn/Json2Class)*/
    /* Modifications to this file will be lost the next time you run the tool.         */
    /* Date: 2015-01-04                                                                */
    /////////////////////////////////////////////////////////////////////////////////////
    
    namespace Json2Whatever
    {
        public class Person
        {
            public Person()
            {
                Name = string.Empty;
                Country = string.Empty;
                Family = new List<Person>();
            }
    
            public Person(JSONNode jsonObject)
            {
                Name = jsonObject["name"];
                Age = jsonObject["age"].AsInt;
                Country = jsonObject["country"];
                Family = new List<Person>();
                foreach(JSONNode item in jsonObject["family"].AsArray)
                {
                    Family.Add(new Person(item));
                }
            }
    
            public string Name {get; set;}
            public int Age {get; set;}
            public string Country {get; set;}
            public List<Person> Family {get; set;}
    
            public JSONNode ToJson()
            {
                var json = new JSONClass();
                json["name"] = new JSONData(Name);
                json["age"] = new JSONData(Age);
                json["country"] = new JSONData(Country);
                foreach(var item in Family)
                {
                    json["family"].Add(item.ToJson());
                }
                return json;
            }
        }
    }

### PyGenerated/person.py
    import json
    #####################################################################################
    # This file is generated by Json2Class (https://github.com/DragonSpawn/Json2Class)  #
    # Modifications to this file will be lost the next time you run the tool.           #
    # Date: 2015-01-04                                                                  #
    #####################################################################################
    
    
    class Person:
        def __init__(self):
            self._name = ""
            self._age = 0
            self._country = ""
            self._family = []
    
        @classmethod
        def load(cls, json_obj):
            """:type json_obj: dict
               :rtype: Person"""
            obj = Person()
            obj._name = json_obj["name"]
            obj._age = json_obj["age"]
            obj._country = json_obj["country"]
            obj._family = []
            for item in json_obj["family"]:
                obj._family.append(Person.load(item))
            return obj
    
        @property
        def name(self):
            """:rtype: str"""
            return self._name
        @name.setter
        def name(self, value):
            """:type value: str
               :rtype: None"""
            self._name = value
    
        @property
        def age(self):
            """:rtype: int"""
            return self._age
        @age.setter
        def age(self, value):
            """:type value: int
               :rtype: None"""
            self._age = value
    
        @property
        def country(self):
            """:rtype: str"""
            return self._country
        @country.setter
        def country(self, value):
            """:type value: str
               :rtype: None"""
            self._country = value
    
        @property
        def family(self):
            """:rtype: list of [Person]"""
            return self._family
        @family.setter
        def family(self, value):
            """:type value: list of [Person]
               :rtype: None"""
            self._family = value
    
    
        def to_json(self):
            """:rtype: str"""
            return Person.JsonEncoder().encode(self)
    
        class JsonEncoder(json.JSONEncoder):
            def default(self, obj):
                d = {
                    'name': obj.name,
                    'age': obj.age,
                    'country': obj.country,
                    'family': [],
                }
                for item in obj.family:
                    d['family'].append(item.to_json())
    
                return d

## Info
### C# generated code
This project was initially created because I needed functionality like this for a Unity3D game I am making with a
python backend. But Unity doesn't support Newtonsoft.Json and reflection etc.
So the generated code uses the SimpleJSON implementation located at [Unity3D wiki](http://wiki.unity3d.com/index.php/SimpleJSON).
If you have need for something else feel free to let me know and I can try to add that, or feel free fix it yourself
and make a push request.